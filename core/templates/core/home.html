{% extends "base.html" %}
{% load static %}

{% block title %}Kartopu Money – Finansal Özgürlük ve Yatırım Günlüğü{% endblock %}
{% block page_css %}
  <link rel="stylesheet" href="{% static 'css/home.css' %}" />
  <link rel="stylesheet" href="{% static 'css/post_list.css' %}" />
{% endblock %}
{% block head %}
  <meta
    name="description"
    content=" Bu blogta finansal özgürlük yolculuğumuzu paylaşıyoruz. Yatırım stratejileri, kişisel finans ipuçları ve piyasa analizleri ile kartopunuzu büyütün."
  />
{% endblock %}

{% block content %}
  <section class="home-hero">
    <div class="home-hero__content">
      <p class="home-hero__eyebrow">Finansal Özgürlüğe Doğru</p>
      <h1>Kendi Kartopunu Yarat</h1>
      <p class="home-hero__subtitle">
        Bu blogda, finansal özgürlük yolculuğumuzda yaşadıklarımızı<br /> ve öğrendiklerimizi paylaşıyoruz. <br />
        Tasarruf, yatırım ve piyasa deneyimlerimizle kendi kartopunu<br /> adım adım büyütmene eşlik etmeyi amaçlıyoruz.
      </p>
      <div class="home-hero__actions">
        {% if featured_post %}
          <a class="button button--primary" href="{{ featured_post.get_absolute_url }}">
            Güncel Portföyü Gör
          </a>
        {% else %}
          <button class="button button--primary is-disabled" type="button" disabled>
            Güncel Portföyü Gör
          </button>
        {% endif %}

        <a class="button button--ghost" href="{% url 'blog:post_feed' %}">
          <svg
            class="button__icon"
            viewBox="0 0 24 24"
            aria-hidden="true"
            focusable="false"
          >
            <path
              fill="currentColor"
              d="M5 20a2 2 0 1 1 0-4 2 2 0 0 1 0 4Zm-1-8v-3a11 11 0 0 1 11 11h-3a8 8 0 0 0-8-8Zm0-6V3a17 17 0 0 1 17 17h-3A14 14 0 0 0 4 6Z"
            />
          </svg>
          RSS ile Takip Et
        </a>
      </div>
    </div>
  </section>

  <section class="home-portfolio">
    <div class="home-portfolio__header">
      <div>
        <h2>Son Portföy Yazıları</h2>
        <p class="home-portfolio__subtitle">
          Portföy kategorisindeki en yeni yazılar.
        </p>
      </div>
      {% if portfolio_category %}
        <a class="button" href="{{ portfolio_category.get_absolute_url }}">
          Tüm portföy yazılarına git
        </a>
      {% else %}
        <button class="button is-disabled" type="button" disabled>
          Tüm portföy yazılarına git
        </button>
      {% endif %}
    </div>

    {% if portfolio_posts %}
      <ul class="post-list home-portfolio__list">
        {% for post in portfolio_posts %}
          <li class="post-list__item">
            <h3 class="post-list__title">
              <a href="{{ post.get_absolute_url }}">{{ post.title }}</a>
            </h3>
            {% if post.cover_image %}
              <figure>
                <img
                  src="{{ post.cover_1200.url }}"
                  srcset="
                    {{ post.cover_600.url }} 600w,
                    {{ post.cover_900.url }} 900w,
                    {{ post.cover_1200.url }} 1200w
                  "
                  sizes="(max-width: 768px) 100vw, 720px"
                  alt="{{ post.title }}"
                  width="{{ post.cover_1200.width }}"
                  height="{{ post.cover_1200.height }}"
                  decoding="async"
                  {% if forloop.first %}
                    loading="eager"
                    fetchpriority="high"
                  {% else %}
                    loading="lazy"
                  {% endif %}
                />
              </figure>
            {% else %}
              <figure class="home-portfolio__placeholder">
                <img
                  src="{% static 'images/home/portfolio-coins.svg' %}"
                  alt="Portföy görseli"
                  width="600"
                  height="600"
                  loading="lazy"
                  decoding="async"
                />
              </figure>
            {% endif %}

            <p class="post-list__meta">
              <small>
                {{ post.published_at|date:"d F Y" }}
                — {{ post.author.full_name }}
                {% if post.category %}
                  — <a href="{{ post.category.get_absolute_url }}">{{ post.category.name }}</a>
                {% endif %}
              </small>
            </p>

            {% if post.excerpt %}
              <p>{{ post.excerpt }} <span><a href="{{ post.get_absolute_url }}"> Okumaya devam et...</a></span></p>
            {% endif %}
          </li>
        {% endfor %}
      </ul>
    {% else %}
      <p>Henüz portföy kategorisinde yazı yok.</p>
    {% endif %}
  </section>
{% endblock %}
