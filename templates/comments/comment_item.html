<li class="comment-item">
  <div class="comment-header">
    {% if comment.social_avatar_url %}
      <img
        class="comment-avatar"
        src="{{ comment.social_avatar_url }}"
        alt="{{ comment.author.full_name }}"
        loading="lazy"
        width="48"
        height="48"
        decoding="async"
      >
    {% endif %}
    <div class="comment-meta">
      <strong>{{ comment.author.full_name }}</strong>
      <small>— {{ comment.created_at|date:"d F Y H:i" }}</small>
    </div>
  </div>
  <p class="comment-body">{{ comment.body|linebreaksbr }}</p>

  {% if can_comment %}
    <details class="comment-reply">
      <summary class="comment-reply__toggle">Yanıtla</summary>
      <form method="post" action="{% url 'comments:post_comment' comment.post_id %}">
        {% csrf_token %}
        <input type="hidden" name="parent_id" value="{{ comment.id }}">
        <div class="comment-reply__field">
          <textarea
            name="body"
            rows="3"
            placeholder="Yanıtınızı yazın...(Maksimum 3000 karakter)"
            required
          ></textarea>
        </div>
        <button type="submit" class="button button--primary">Yanıtı Gönder</button>
      </form>
    </details>
  {% endif %}

  {% if comment.nested_replies %}
    <ul class="comment-children">
      {% for reply in comment.nested_replies %}
        {% include "comments/comment_item.html" with comment=reply can_comment=can_comment %}
      {% endfor %}
    </ul>
  {% endif %}
</li>
